<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currículo — <span id="nomeCompleto"></span></title>
    <script type="application/ld+json" id="jsonLd">
    </script>
    <!-- Importando html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            line-height: 1.4; 
            color: #111; 
            padding: 1rem; 
            margin: 0;
        }
        h1, h2 { 
            margin-bottom: 0.25rem; 
        }
        section { 
            margin-top: 1rem; 
        }
        ul { 
            list-style: none; 
            padding-left: 0; 
        }
        .date { 
            float: right; 
            font-style: italic; 
        }
        .skill-list li { 
            display: inline-block; 
            margin-right: 0.5rem; 
            margin-bottom: 0.5rem;
        }
        .clearfix::after { 
            content: ""; 
            display: table; 
            clear: both; 
        }
        #exportButton {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
            z-index: 1000;
        }
        #exportButton:hover {
            background-color: #0056b3;
        }
        @media print {
            #exportButton {
                display: none;
            }
            body {
                padding: 0;
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <button id="exportButton">Exportar para PDF</button>

    <header>
        <h1 id="nomeCompleto"></h1>
        <p>
            <strong>Email:</strong> <span id="email"></span><br>
            <strong>Telefone:</strong> <span id="telefone"></span><br>
            <strong>LinkedIn:</strong> <a id="linkedin" href="" target="_blank"></a><br>
            <strong>GitHub:</strong> <a id="github" href="" target="_blank"></a>
        </p>
    </header>

    <section aria-labelledby="perfil">
        <h2 id="perfil">Perfil Profissional</h2>
        <p id="descricao"></p>
    </section>

    <section aria-labelledby="experiencia">
        <h2 id="experiencia">Experiência Profissional</h2>
        <div id="experienciaContainer"></div>
    </section>

    <section aria-labelledby="educacao">
        <h2 id="educacao">Formação Acadêmica</h2>
        <div id="educacaoContainer"></div>
    </section>

    <section aria-labelledby="skills">
        <h2 id="skills">Skills Técnicas</h2>
        <ul class="skill-list" id="skillsContainer"></ul>
    </section>

    <section aria-labelledby="projetos">
        <h2 id="projetos">Projetos Relevantes</h2>
        <div id="projetosContainer"></div>
    </section>

    <section aria-labelledby="certificacoes">
        <h2 id="certificacoes">Certificações</h2>
        <div id="certificacoesContainer"></div>
    </section>

    <script type="module">
        import config from '../config/config.js';
        import { exportToPDF } from '../js/pdf-export.js';

        // Função para atualizar o JSON-LD
        function atualizarJsonLd() {
            const jsonLd = {
                "@context": "https://schema.org",
                "@type": "Person",
                "name": config.perfil.nome,
                "email": config.perfil.email,
                "telephone": config.perfil.telefone,
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": config.perfil.cidade,
                    "addressRegion": config.perfil.estado,
                    "addressCountry": "BR"
                },
                "hasOccupation": config.perfil.cargo,
                "knowsLanguage": config.perfil.idiomas,
                "skill": Object.values(config.skills).flat()
            };
            document.getElementById('jsonLd').textContent = JSON.stringify(jsonLd, null, 2);
        }

        // Função genérica para criar elementos
        function criarElemento(tipo, conteudo, classe = '') {
            const elemento = document.createElement(tipo);
            if (conteudo) elemento.innerHTML = conteudo;
            if (classe) elemento.className = classe;
            return elemento;
        }

        // Função para preencher os dados básicos
        function preencherDadosBasicos() {
            const perfil = config.perfil;
            document.getElementById('nomeCompleto').textContent = perfil.nome;
            document.getElementById('email').textContent = perfil.email;
            document.getElementById('telefone').textContent = perfil.telefone;
            document.getElementById('linkedin').href = perfil.linkedin;
            document.getElementById('linkedin').textContent = 'LinkedIn';
            document.getElementById('github').href = perfil.github;
            document.getElementById('github').textContent = 'GitHub';
            document.getElementById('descricao').textContent = perfil.descricao;
        }

        // Função para preencher experiência
        function preencherExperiencia() {
            const container = document.getElementById('experienciaContainer');
            config.experiencia.forEach(exp => {
                const article = criarElemento('article', '', 'clearfix');
                article.innerHTML = `
                    <h3>${exp.empresa} <span class="date">${exp.periodo}</span></h3>
                    <p><em>${exp.cargo}</em></p>
                    <ul>
                        ${exp.responsabilidades.map(resp => `<li>${resp}</li>`).join('')}
                    </ul>
                `;
                container.appendChild(article);
            });
        }

        // Função para preencher educação
        function preencherEducacao() {
            const container = document.getElementById('educacaoContainer');
            config.educacao.forEach(edu => {
                const li = criarElemento('li');
                li.innerHTML = `
                    <strong>${edu.curso}</strong> — ${edu.instituicao}
                    <span class="date">${edu.periodo}</span>
                `;
                container.appendChild(li);
            });
        }

        // Função para preencher skills
        function preencherSkills() {
            const container = document.getElementById('skillsContainer');
            Object.values(config.skills).flat().forEach(skill => {
                const li = criarElemento('li');
                li.textContent = skill;
                container.appendChild(li);
            });
        }

        // Função para preencher projetos
        function preencherProjetos() {
            const container = document.getElementById('projetosContainer');
            config.projetos.forEach(proj => {
                const li = criarElemento('li');
                li.innerHTML = `
                    <strong>${proj.nome}</strong>
                    <span class="date">${proj.data}</span><br>
                    ${proj.descricao}
                `;
                container.appendChild(li);
            });
        }

        // Função para preencher certificações
        function preencherCertificacoes() {
            const container = document.getElementById('certificacoesContainer');
            config.certificacoes.forEach(cert => {
                const li = criarElemento('li');
                li.innerHTML = `${cert.nome} — ${cert.data}`;
                container.appendChild(li);
            });
        }

        // Configurando o botão de exportação
        document.getElementById('exportButton').addEventListener('click', exportToPDF);

        // Inicializar a página
        function inicializar() {
            atualizarJsonLd();
            preencherDadosBasicos();
            preencherExperiencia();
            preencherEducacao();
            preencherSkills();
            preencherProjetos();
            preencherCertificacoes();
        }

        inicializar();
    </script>
</body>
</html> 